{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/LocationOptions.vue?f9fc","webpack:///./src/components/SearchByLocation.vue?2a8d","webpack:///./src/assets/search.svg","webpack:///./src/pages/ShoppingCentres.vue","webpack:///./src/storages/distanceStorage.js","webpack:///./src/helpers/haversineHelper.js","webpack:///./src/services/airtableService.js","webpack:///./src/services/mapboxService.js","webpack:///./src/components/SearchByLocation.vue","webpack:///./src/components/LocationOptions.vue","webpack:///./src/components/LocationOptions.vue?752c","webpack:///./src/components/SearchInput.vue","webpack:///./src/components/SearchInput.vue?d0a7","webpack:///./src/composables/useGeolocation.js","webpack:///./src/directives/mask.js","webpack:///./src/helpers/circumscribedСircleHelper.js","webpack:///./src/components/SearchByLocation.vue?7db2","webpack:///./src/components/SearchByShoppingCentre.vue","webpack:///./src/components/SearchByShoppingCentre.vue?66c5","webpack:///./src/components/ShopList.vue","webpack:///./src/components/ShopCard.vue","webpack:///./src/components/ShopCard.vue?aaf9","webpack:///./src/components/ShopList.vue?14d6","webpack:///./src/pages/ShoppingCentres.vue?ec69","webpack:///./src/main.js","webpack:///./src/components/SearchInput.vue?6477","webpack:///./src/components/SearchByShoppingCentre.vue?eabf","webpack:///./src/pages/ShoppingCentres.vue?8d3f","webpack:///./src/assets/image-not-found.jpg"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","class","for","isLocationMode","id","type","tabindex","locations","show-result","showResult","search","searchLocation","selectLocation","searchByShop","shopsFiltred","clearSearch","shops","getKey","firstPointCoordinates","seconsPointCoordinates","firstKey","secondKey","DistanceStorage","Map","this","distances","set","storage","calculateDistance","pointCoordinates","shopCoordinates","cachedResult","convertCoordinates","pointLatitude","pointLongitude","shopLatitude","shopLongitude","earthRadius","sinDistance","Math","sqrt","haversine","cos","distance","asin","versin","angle","sin","rad","PI","coordinates","latitudeString","longitudeString","latitude","Number","longitude","isNaN","convertDmsToDecimalDegrees","matches","match","base","Airtable","apiKey","process","tableName","getShopList","ref","select","eachPage","records","fetchNextPage","shopList","map","shop","fields","corrdinates","split","address","Address","buyGiftCardUrl","websiteUrl","err","console","error","baseClient","mbxClient","accessToken","geocodingService","mbxGeocoding","getLocations","searchText","forwardGeocode","query","send","response","body","features","location","center","bbox","place_name","undefined","src","loading","alt","disabled","getCurrentPosition","geolocationIconClass","radius","radiusMask","focusPreviousOption","focusNextOption","props","Array","default","emits","setup","emit","event","target","previousSibling","tabIndex","focus","nextSibling","render","searchTextComputed","$attrs","String","required","searchButtonRef","focusSearchButton","useGeolocation","options","enableHighAccuracy","timeout","maximumAge","success","position","currentCorrdinates","coords","toFixed","navigator","geolocation","beforeMount","element","binding","Inputmask","mask","getRadiusCircumscribedСircle","minLat","minLon","maxLat","maxLon","floor","components","LocationOptions","SearchInput","directives","Boolean","searchInputRef","alias","suffix","max","newValue","role","href","notAvailableText","ShopCard","SearchByLocation","SearchByShoppingCentre","ShopList","airtableService","selectedLocation","sort","shop1","shop2","filter","mapboxService","toLowerCase","includes","createApp","ShoppingCentres","mount"],"mappings":"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","file":"js/app.d7e1d646.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./LocationOptions.vue?vue&type=style&index=0&id=576971b2&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./SearchByLocation.vue?vue&type=style&index=0&id=7ef80a95&lang=css\"","module.exports = __webpack_public_path__ + \"img/search.22c570ec.svg\";","<template>\n  <div class=\"section-large padding-top-0\">\n    <div class=\"container-medium w-container\">\n      <div class=\"tabs\">\n        <div class=\"tab\">\n          <input v-model=\"isLocationMode\" :value=\"true\" id=\"locationModeTrue\" type=\"radio\" tabindex='6'>\n          <label for=\"locationModeTrue\">Location</label>\n        </div>\n        <div class=\"tab\">\n          <input v-model=\"isLocationMode\" :value=\"false\" id=\"locationModeFalse\" type=\"radio\" tabindex='7'>\n          <label for=\"locationModeFalse\">Shopping centre</label>\n        </div>\n      </div>\n      <div class=\"search-wrapper\">\n        <SearchByLocation\n          v-if=\"isLocationMode\"\n          :locations=\"locations\"\n          :show-result=\"showResult\"\n          @search=\"search\"\n          @search-location=\"searchLocation\"\n          @select-location=\"selectLocation\"\n        />\n        <SearchByShoppingCentre\n          v-else\n          :show-result=\"showResult\"\n          @search=\"searchByShop\"\n        />\n      </div>\n      <div v-if=\"showResult\" class=\"margin-top-50\">\n        <div v-if=\"!shopsFiltred.length\" class=\"text-center\">\n          <div class=\"margin-bottom-15\">No results found, please try a new search or expanding the radius.</div>\n          <button\n            type=\"button\"\n            class=\"button-primary w-button outline sand\"\n            @click=\"clearSearch\"\n          >\n          Clear search\n          </button>\n        </div>\n        <ShopList :shops=\"shopsFiltred\" />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref, watch } from 'vue'\nimport { calculateDistance } from '../helpers/haversineHelper'\nimport airtableService from '../services/airtableService'\nimport mapboxService from '../services/mapboxService'\nimport SearchByLocation from '../components/SearchByLocation.vue'\nimport SearchByShoppingCentre from '../components/SearchByShoppingCentre.vue'\nimport ShopList from '../components/ShopList.vue'\n\nexport default {\n  name: 'ShoppingCentres',\n  components: {\n    SearchByLocation,\n    SearchByShoppingCentre,\n    ShopList\n  },\n  setup () {\n    const isLocationMode = ref(true)\n    const showResult = ref(false)\n    const shops = airtableService.getShopList()\n    const locations = ref([])\n    const selectedLocation = ref({})\n    const shopsFiltred = ref([])\n\n    function search (radius) {\n      shopsFiltred.value = selectedLocation.value.corrdinates\n        ? shops.value\n          .map(shop => ({\n            ...shop,\n            distance: shop.corrdinates.length\n              ? calculateDistance(selectedLocation.value.corrdinates, shop.corrdinates)\n              : null\n          }))\n          .sort((shop1, shop2) => shop1.distance - shop2.distance)\n          .filter((shop) => shop.distance !== null && (!radius || shop.distance <= radius))\n        : []\n      showResult.value = true\n    }\n\n    async function searchLocation (searchText) {\n      locations.value = searchText\n        ? await mapboxService.getLocations(searchText)\n        : []\n    }\n\n    function selectLocation (location) {\n      locations.value = []\n      selectedLocation.value = location\n    }\n\n    function searchByShop (searchText) {\n      shopsFiltred.value = shops.value.filter((shop) => shop.name.toLowerCase().includes(searchText.toLowerCase()) ||\n      shop.address.toLowerCase().includes(searchText.toLowerCase()))\n      showResult.value = true\n    }\n\n    function clearSearch () {\n      showResult.value = false\n      shopsFiltred.value = []\n      locations.value = []\n      selectedLocation.value = {}\n    }\n\n    watch(isLocationMode, () => {\n      clearSearch()\n    })\n\n    return {\n      shopsFiltred,\n      isLocationMode,\n      search,\n      searchLocation,\n      selectLocation,\n      searchByShop,\n      clearSearch,\n      locations,\n      showResult\n    }\n  }\n}\n</script>\n\n<style>\n.section-large.padding-top-0 {\n  padding: 0;\n}\n.tabs {\n  display: flex;\n  margin: 0 -2rem 0;\n}\n.tab {\n  display: flex;\n  align-items: center;\n  margin: 0 2rem;\n}\n.tab label {\n  margin: 0;\n  margin-left: 0.5rem;\n  font-weight: normal;\n  font-size: 0.9rem;\n}\n.tab input {\n  width: 1.5rem;\n  height: 1.5rem;\n}\n.search-wrapper {\n  display: flex;\n  align-items: flex-end;\n  height: 80px;\n}\n.margin-top-50 {\n  margin-top: 50px;\n}\n.text-center {\n  text-align: center;\n}\n</style>\n","function getKey (firstPointCoordinates, seconsPointCoordinates) {\n  const firstKey = `${firstPointCoordinates[0]},${firstPointCoordinates[1]}`\n  const secondKey = `${seconsPointCoordinates[0]},${seconsPointCoordinates[1]}`\n  return `${firstKey};${secondKey}`\n}\n\nclass DistanceStorage {\n  distances = new Map()\n\n  get (firstPointCoordinates, seconsPointCoordinates) {\n    const key = getKey(firstPointCoordinates, seconsPointCoordinates)\n    return this.distances.get(key)\n  }\n\n  set (firstPointCoordinates, seconsPointCoordinates, value) {\n    const key = getKey(firstPointCoordinates, seconsPointCoordinates)\n    return this.distances.set(key, value)\n  }\n}\n\nexport const storage = new DistanceStorage()\n","import { storage } from '../storages/distanceStorage'\n\n// Returns the distance in km\nexport function calculateDistance (pointCoordinates, shopCoordinates) {\n  const cachedResult = storage.get(pointCoordinates, shopCoordinates)\n  if (cachedResult) {\n    return cachedResult\n  }\n  const [pointLatitude, pointLongitude] = convertCoordinates(pointCoordinates)\n  const [shopLatitude, shopLongitude] = convertCoordinates(shopCoordinates)\n  const earthRadius = 6371\n  const sinDistance = Math.sqrt(haversine(shopLatitude - pointLatitude) + Math.cos(pointLatitude) * Math.cos(shopLatitude) * haversine(shopLongitude - pointLongitude))\n  const distance = 2 * earthRadius * Math.asin(sinDistance)\n  storage.set(pointCoordinates, shopCoordinates, distance)\n  return distance\n}\n\nfunction versin (angle) {\n  const sin = Math.sin(angle / 2)\n  return 2 * sin * sin\n}\n\nfunction haversine (angle) {\n  return versin(angle) / 2\n}\n\nfunction rad (angle) {\n  return angle * Math.PI / 180\n}\n\nfunction convertCoordinates (coordinates) {\n  const [latitudeString, longitudeString] = coordinates\n  let latitude = Number(latitudeString)\n  let longitude = Number(longitudeString)\n  if (isNaN(latitude)) {\n    latitude = convertDmsToDecimalDegrees(latitudeString)\n  }\n  if (isNaN(longitude)) {\n    longitude = convertDmsToDecimalDegrees(longitudeString)\n  }\n  return [rad(latitude), rad(longitude)]\n}\n\nfunction convertDmsToDecimalDegrees (angle) {\n  const matches = angle.match(/(\\d+)\\D+(\\d+)\\D+(\\d+)/)\n  if (matches.length > 3) {\n    return Number(matches[1]) + matches[2] / 60 + matches[3] / 3600\n  }\n  return angle\n}\n","import { ref } from 'vue'\nimport Airtable from 'airtable'\n\nconst base = new Airtable({ apiKey: process.env.VUE_APP_AIRTABLE_API_KEY }).base(process.env.VUE_APP_AIRTABLE_BASE_NAME)\nconst tableName = 'Centres'\n\nexport default {\n  getShopList: () => {\n    const shops = ref([])\n    base(tableName).select()\n      .eachPage((records, fetchNextPage) => {\n        const shopList = [...records].map((shop) => {\n          const { fields } = shop\n          const corrdinates = fields['Longtitude and latitude corrdinates ']?.split(',') || []\n          return {\n            id: fields.id,\n            name: fields['Shopping centre name '],\n            address: fields.Address || '',\n            buyGiftCardUrl: fields['Buy gift card URL'],\n            websiteUrl: fields['Website URL'],\n            corrdinates\n          }\n        })\n        shops.value.push(...shopList)\n        fetchNextPage()\n      }, (err) => {\n        if (err) {\n          console.error(err)\n        }\n      })\n    return shops\n  }\n}\n","import mbxClient from '@mapbox/mapbox-sdk'\nimport mbxGeocoding from '@mapbox/mapbox-sdk/services/geocoding'\n\nconst baseClient = mbxClient({ accessToken: process.env.VUE_APP_MAPBOX_ACCESS_TOKEN })\nconst geocodingService = mbxGeocoding(baseClient)\nconst storage = new Map()\n\nasync function getLocations (searchText) {\n  const response = await geocodingService.forwardGeocode({\n    query: searchText\n  }).send()\n  return response.body.features.map((location) => {\n    const [longitude, latitude] = location.center\n    const bbox = location.bbox\n    return {\n      id: location.id,\n      name: location.place_name,\n      corrdinates: [latitude, longitude],\n      bbox: bbox ? [bbox[1], bbox[0], bbox[3], bbox[2]] : undefined\n    }\n  })\n}\n\nexport default {\n  getLocations: async (searchText) => {\n    const cachedResult = storage.get(searchText)\n    if (cachedResult) {\n      return cachedResult\n    }\n    const locations = await getLocations(searchText)\n    storage.set(searchText, locations)\n    return locations\n  }\n}\n","<template>\n  <div class=\"search-input-wrapper search-by-location\">\n    <SearchInput\n      v-model:searchText=\"searchText\"\n      ref=\"searchInputRef\"\n      @input=\"searchLocation\"\n      @search=\"search()\"\n    />\n    <button\n      :disabled=\"loading\"\n      class=\"geolocation\"\n      tabindex='4'\n      @click=\"getCurrentPosition\"\n    >\n      <div class=\"geolocation-icon\" :class=\"geolocationIconClass\">\n        <img src=\"https://assets.website-files.com/60dddc34cacb5c42e92bde2f/60ecb5f6a19c1b68ef2ac7ad_Location.svg\" loading=\"lazy\" alt=\"\">\n      </div>\n    </button>\n    <LocationOptions\n      v-if=\"locations.length\"\n      :locations=\"locations\"\n      @select-location=\"selectLocation\"\n    />\n  </div>\n  <div class=\"form-input-wrapper\">\n    <label for=\"radius\" class=\"radius\">Radius</label>\n    <input\n      v-model.number=\"radius\"\n      v-mask=\"radiusMask\"\n      type=\"text\"\n      tabindex='5'\n      id=\"radius\"\n      class=\"form-input w-input\"\n    >\n  </div>\n</template>\n\n<script>\nimport { computed, ref, watch, toRefs } from 'vue'\nimport { debounce } from 'lodash'\nimport LocationOptions from './LocationOptions.vue'\nimport SearchInput from './SearchInput.vue'\nimport { useGeolocation } from '../composables/useGeolocation'\nimport mask from '../directives/mask'\nimport { getRadiusCircumscribedСircle } from '../helpers/circumscribedСircleHelper'\n\nexport default {\n  name: 'SearchByLocation',\n  components: {\n    LocationOptions,\n    SearchInput\n  },\n  directives: {\n    mask\n  },\n  props: {\n    locations: {\n      type: Array,\n      default: () => []\n    },\n    showResult: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: ['search', 'select-location', 'search-location'],\n  setup (props, { emit }) {\n    const { showResult } = toRefs(props)\n    const searchText = ref('')\n    const searchInputRef = ref()\n    const radius = ref(10)\n    const radiusMask = {\n      alias: 'numeric',\n      suffix: ' km',\n      max: 1000000\n    }\n    function search () {\n      emit('search', radius.value)\n    }\n\n    function selectLocation (location) {\n      searchText.value = location.name\n      radius.value = location.bbox\n        ? getRadiusCircumscribedСircle(location.bbox)\n        : 10\n      emit('select-location', location)\n      searchInputRef.value.focusSearchButton()\n    }\n    const searchLocation = debounce(() => {\n      emit('search-location', searchText.value)\n    }, 800)\n\n    const { getCurrentPosition, loading } = useGeolocation(searchText, radius, emit)\n    const geolocationIconClass = computed(() => loading.value ? 'geolocation-icon-animation' : '')\n\n    watch(showResult, (newValue) => {\n      if (!newValue) {\n        searchText.value = ''\n      }\n    })\n\n    return {\n      searchText,\n      search,\n      selectLocation,\n      searchLocation,\n      radius,\n      radiusMask,\n      getCurrentPosition,\n      geolocationIconClass,\n      loading,\n      searchInputRef\n    }\n  }\n}\n</script>\n\n<style>\n.search-input-wrapper {\n  position: relative;\n  margin-right: 1rem;\n}\n.search-by-location input {\n  padding-right: 75px;\n}\n.geolocation {\n  display: flex;\n  position: absolute;\n  top: 2px;\n  right: 100px;\n  height: 100%;\n  background-color: transparent;\n}\n.geolocation:focus {\n  outline: none;\n}\n.geolocation img {\n  height: 32px;\n  opacity: 0.8;\n}\n.geolocation:focus img {\n  opacity: 1;\n}\n@keyframes ping {\n  from {\n    transform: scale(.25);\n    opacity: 1;\n  }\n  to {\n    transform: scale(1);\n    opacity: 0.5;\n  }\n}\n.geolocation-icon-animation {\n  animation: ping 1s ease-in-out infinite both;\n}\n.radius {\n  font-size: 16px;\n  line-height: 150%;\n  font-weight: 400;\n}\n</style>\n","<template>\n  <ul class=\"location-options\" @keyup.arrow-up=\"focusPreviousOption\" @keyup.arrow-down=\"focusNextOption\">\n    <li\n      v-for=\"location in locations\"\n      :key=\"location.id\"\n      tabindex='2'\n      @click=\"selectLocation(location)\"\n      @keyup.enter=\"selectLocation(location)\"\n      @keyup.space=\"selectLocation(location)\"\n    >\n      {{ location.name }}\n    </li>\n  </ul>\n</template>\n\n<script>\nexport default {\n  name: 'LocationOptions',\n  props: {\n    locations: {\n      type: Array,\n      default: () => []\n    }\n  },\n  emits: ['select-location'],\n  setup (props, { emit }) {\n    function focusPreviousOption (event) {\n      if (event.target.previousSibling.tabIndex) {\n        event.target.previousSibling.focus()\n      }\n    }\n    function focusNextOption (event) {\n      if (event.target.nextSibling.tabIndex) {\n        event.target.nextSibling.focus()\n      }\n    }\n    function selectLocation (location) {\n      emit('select-location', location)\n    }\n\n    return {\n      focusPreviousOption,\n      focusNextOption,\n      selectLocation\n    }\n  }\n}\n</script>\n\n<style>\n.location-options {\n  position: absolute;\n  width: 100%;\n  padding: 0.4rem 0;\n  border-radius: 15px;\n  background-color: white;\n  border: 2px solid #172352;\n}\nli {\n  margin: 0.3rem 0;\n  padding: 0 1rem;\n  list-style: none;\n  cursor: pointer;\n}\nli:focus {\n  outline:solid 1px black;\n}\nli:hover {\n  background-color: #ff666e;\n  color: #ffffff;\n}\n</style>\n","import { render } from \"./LocationOptions.vue?vue&type=template&id=576971b2\"\nimport script from \"./LocationOptions.vue?vue&type=script&lang=js\"\nexport * from \"./LocationOptions.vue?vue&type=script&lang=js\"\n\nimport \"./LocationOptions.vue?vue&type=style&index=0&id=576971b2&lang=css\"\nscript.render = render\n\nexport default script","<template>\n  <div class=\"form-input-wrapper form-input-group search-input\">\n    <div class=\"form-input-group-prepend\">\n      <img src=\"@/assets/search.svg\" loading=\"lazy\" alt=\"\">\n    </div>\n    <input\n      v-model=\"searchTextComputed\"\n      v-bind=\"$attrs\"\n      tabindex='1'\n      type=\"text\"\n      class=\"form-input w-input\"\n    >\n    <div class=\"form-input-group-append\">\n      <button\n        type=\"button\"\n        tabindex='3'\n        class=\"button-primary w-button\"\n        ref=\"searchButtonRef\"\n        @click=\"search()\"\n      >Search</button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { computed, toRefs, ref } from 'vue'\n\nexport default {\n  name: 'SearchInput',\n  props: {\n    searchText: {\n      type: String,\n      required: true\n    }\n  },\n  emits: ['search', 'update:searchText'],\n  setup (props, { emit }) {\n    const searchButtonRef = ref()\n    const { searchText } = toRefs(props)\n    const searchTextComputed = computed({\n      get: () => searchText.value,\n      set: (value) => {\n        emit('update:searchText', value)\n      }\n    })\n\n    function search () {\n      emit('search')\n    }\n\n    function focusSearchButton () {\n      searchButtonRef.value.focus()\n    }\n\n    return {\n      searchTextComputed,\n      search,\n      focusSearchButton,\n      searchButtonRef\n    }\n  }\n}\n</script>\n\n<style>\n.search-input {\n  position: relative;\n}\n.search-input input {\n  width: 400px;\n  padding-right: 30px;\n  padding-left: 40px;\n}\n.form-input-group {\n  display: flex;\n  align-items: stretch;\n}\n.form-input-group-append button {\n  padding: 9px 15px 8px;\n  margin-left: -23px;\n}\n.form-input-group-prepend {\n  position: absolute;\n  left: 10px;\n  top: 3px;\n  width: 16px;\n  height: 16px;\n}\n</style>\n","import { render } from \"./SearchInput.vue?vue&type=template&id=ecbfe40e\"\nimport script from \"./SearchInput.vue?vue&type=script&lang=js\"\nexport * from \"./SearchInput.vue?vue&type=script&lang=js\"\n\nimport \"./SearchInput.vue?vue&type=style&index=0&id=ecbfe40e&lang=css\"\nscript.render = render\n\nexport default script","import { ref } from 'vue'\n\nexport function useGeolocation (searchText, radius, emit) {\n  const loading = ref(false)\n  const options = {\n    enableHighAccuracy: true,\n    timeout: 10000,\n    maximumAge: 30000\n  }\n\n  function success (position) {\n    loading.value = false\n    const currentCorrdinates = [position.coords.latitude, position.coords.longitude]\n    const latitude = position.coords.latitude.toFixed(4)\n    const longitude = position.coords.longitude.toFixed(4)\n    searchText.value = `${latitude}, ${longitude}`\n    emit('select-location', {\n      corrdinates: currentCorrdinates\n    })\n    radius.value = 10\n    emit('search', radius.value)\n  }\n\n  function getCurrentPosition () {\n    loading.value = true\n    navigator.geolocation.getCurrentPosition(success, () => {}, options)\n  }\n\n  return {\n    getCurrentPosition,\n    loading\n  }\n}\n","import Inputmask from 'inputmask'\n\nexport default {\n  beforeMount (element, binding) {\n    Inputmask(binding.value).mask(element)\n  }\n}\n","import { calculateDistance } from './haversineHelper'\n\n// Returns the distance in km\nexport function getRadiusCircumscribedСircle (bbox) {\n  const [minLat, minLon, maxLat, maxLon] = bbox\n  const distance = calculateDistance([minLat, minLon], [maxLat, maxLon])\n  return Math.floor(distance / 2)\n}\n","import { render } from \"./SearchByLocation.vue?vue&type=template&id=7ef80a95\"\nimport script from \"./SearchByLocation.vue?vue&type=script&lang=js\"\nexport * from \"./SearchByLocation.vue?vue&type=script&lang=js\"\n\nimport \"./SearchByLocation.vue?vue&type=style&index=0&id=7ef80a95&lang=css\"\nscript.render = render\n\nexport default script","<template>\n  <SearchInput\n    v-model:searchText=\"searchText\"\n    @keyup.enter=\"search()\"\n    @search=\"search()\"\n  />\n</template>\n\n<script>\nimport { ref, watch, toRefs } from 'vue'\nimport SearchInput from './SearchInput.vue'\n\nexport default {\n  name: 'SearchByShoppingCentre',\n  components: {\n    SearchInput\n  },\n  props: {\n    showResult: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: ['search'],\n  setup (props, { emit }) {\n    const { showResult } = toRefs(props)\n    const searchText = ref('')\n\n    function search () {\n      emit('search', searchText.value)\n    }\n\n    watch(showResult, (newValue) => {\n      if (!newValue) {\n        searchText.value = ''\n      }\n    })\n\n    return {\n      searchText,\n      search\n    }\n  }\n}\n</script>\n\n<style>\n.search-by-shopping-centre {\n  display: flex;\n}\n</style>\n","import { render } from \"./SearchByShoppingCentre.vue?vue&type=template&id=21293b30\"\nimport script from \"./SearchByShoppingCentre.vue?vue&type=script&lang=js\"\nexport * from \"./SearchByShoppingCentre.vue?vue&type=script&lang=js\"\n\nimport \"./SearchByShoppingCentre.vue?vue&type=style&index=0&id=21293b30&lang=css\"\nscript.render = render\n\nexport default script","<template>\n  <div class=\"insights-collection-list-wrapper w-dyn-list\">\n    <div class=\"insights-collection-list w-dyn-items\" role=\"list\">\n      <ShopCard\n        v-for=\"shop in shops\"\n        :key=\"shop.id\"\n        :shop=\"shop\"\n      />\n    </div>\n  </div>\n</template>\n\n<script>\nimport ShopCard from './ShopCard.vue'\n\nexport default {\n  name: 'ShopList',\n  components: {\n    ShopCard\n  },\n  props: {\n    shops: {\n      type: Array,\n      required: true\n    }\n  }\n}\n</script>\n","<template>\n  <div class=\"insights-collection-item w-dyn-item\" role=\"listitem\">\n    <div class=\"insights-card-wrapper\">\n      <div class=\"image-wrapper\">\n        <img src=\"@/assets/image-not-found.jpg\" loading=\"lazy\" alt=\"\">\n      </div>\n      <div class=\"insights-card-heading\">\n        <h3>{{ shop.name }}</h3>\n        <div class=\"margin-bottom-20\">{{ shop.address }}</div>\n        <a\n          v-if =\"buyGiftCardUrl\"\n          :href=\"buyGiftCardUrl\"\n          target=\"_blank\"\n          class=\"button-primary w-button width-100 margin-bottom-20\"\n        >\n          <div class=\"div-block-3\">\n            <div class=\"inline\">\n              <div class=\"button-text\">Buy gift card</div>\n            </div>\n          </div>\n        </a>\n        <a\n          v-if =\"websiteUrl\"\n          :href=\"websiteUrl\"\n          target=\"_blank\"\n          class=\"button-primary sand outline width-100 w-inline-block\"\n        >\n          <div class=\"div-block-3\">\n            <div class=\"inline\">\n              <div class=\"button-text\">Visit website</div>\n            </div>\n          </div>\n        </a>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'ShopCard',\n  props: {\n    shop: {\n      type: Object,\n      required: true\n    }\n  },\n  setup (props) {\n    const notAvailableText = 'N/A'\n    const buyGiftCardUrl = props.shop.buyGiftCardUrl && props.shop.buyGiftCardUrl !== notAvailableText\n      ? props.shop.buyGiftCardUrl\n      : ''\n    const websiteUrl = props.shop.websiteUrl && props.shop.websiteUrl !== notAvailableText\n      ? props.shop.websiteUrl\n      : ''\n    return {\n      buyGiftCardUrl,\n      websiteUrl\n    }\n  }\n}\n</script>\n","import { render } from \"./ShopCard.vue?vue&type=template&id=6dc31e36\"\nimport script from \"./ShopCard.vue?vue&type=script&lang=js\"\nexport * from \"./ShopCard.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./ShopList.vue?vue&type=template&id=0c892118\"\nimport script from \"./ShopList.vue?vue&type=script&lang=js\"\nexport * from \"./ShopList.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./ShoppingCentres.vue?vue&type=template&id=224e510e\"\nimport script from \"./ShoppingCentres.vue?vue&type=script&lang=js\"\nexport * from \"./ShoppingCentres.vue?vue&type=script&lang=js\"\n\nimport \"./ShoppingCentres.vue?vue&type=style&index=0&id=224e510e&lang=css\"\nscript.render = render\n\nexport default script","import { createApp } from 'vue'\nimport ShoppingCentres from './pages/ShoppingCentres.vue'\n\ncreateApp(ShoppingCentres)\n  .mount('#shopping-centres-app')\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./SearchInput.vue?vue&type=style&index=0&id=ecbfe40e&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./SearchByShoppingCentre.vue?vue&type=style&index=0&id=21293b30&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ShoppingCentres.vue?vue&type=style&index=0&id=224e510e&lang=css\"","module.exports = __webpack_public_path__ + \"img/image-not-found.c5d0afe3.jpg\";"],"sourceRoot":""}