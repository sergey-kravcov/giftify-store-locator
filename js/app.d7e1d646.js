(function(e){function t(t){for(var c,o,i=t[0],s=t[1],u=t[2],d=0,b=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&b.push(r[o][0]),r[o]=0;for(c in s)Object.prototype.hasOwnProperty.call(s,c)&&(e[c]=s[c]);l&&l(t);while(b.length)b.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],c=!0,i=1;i<n.length;i++){var s=n[i];0!==r[s]&&(c=!1)}c&&(a.splice(t--,1),e=o(o.s=n[0]))}return e}var c={},r={app:0},a=[];function o(t){if(c[t])return c[t].exports;var n=c[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=c,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)o.d(n,c,function(t){return e[t]}.bind(null,c));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var l=s;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0521":function(e,t,n){"use strict";n("f32f")},1:function(e,t){},"114b":function(e,t,n){},"1aa4":function(e,t,n){},2:function(e,t){},"24a7":function(e,t,n){},"255c":function(e,t,n){},3460:function(e,t,n){"use strict";n("114b")},"51f2":function(e,t,n){e.exports=n.p+"img/search.22c570ec.svg"},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var c=n("7a23"),r=(n("ac1f"),n("841c"),{class:"section-large padding-top-0"}),a={class:"container-medium w-container"},o={class:"tabs"},i={class:"tab"},s=Object(c["f"])("label",{for:"locationModeTrue"},"Location",-1),u={class:"tab"},l=Object(c["f"])("label",{for:"locationModeFalse"},"Shopping centre",-1),d={class:"search-wrapper"},b={key:0,class:"margin-top-50"},f={key:0,class:"text-center"},p=Object(c["f"])("div",{class:"margin-bottom-15"},"No results found, please try a new search or expanding the radius.",-1);function h(e,t,n,h,O,j){var v=Object(c["k"])("SearchByLocation"),m=Object(c["k"])("SearchByShoppingCentre"),g=Object(c["k"])("ShopList");return Object(c["h"])(),Object(c["d"])("div",r,[Object(c["f"])("div",a,[Object(c["f"])("div",o,[Object(c["f"])("div",i,[Object(c["r"])(Object(c["f"])("input",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return h.isLocationMode=e}),value:!0,id:"locationModeTrue",type:"radio",tabindex:"6"},null,512),[[c["o"],h.isLocationMode]]),s]),Object(c["f"])("div",u,[Object(c["r"])(Object(c["f"])("input",{"onUpdate:modelValue":t[2]||(t[2]=function(e){return h.isLocationMode=e}),value:!1,id:"locationModeFalse",type:"radio",tabindex:"7"},null,512),[[c["o"],h.isLocationMode]]),l])]),Object(c["f"])("div",d,[h.isLocationMode?(Object(c["h"])(),Object(c["d"])(v,{key:0,locations:h.locations,"show-result":h.showResult,onSearch:h.search,onSearchLocation:h.searchLocation,onSelectLocation:h.selectLocation},null,8,["locations","show-result","onSearch","onSearchLocation","onSelectLocation"])):(Object(c["h"])(),Object(c["d"])(m,{key:1,"show-result":h.showResult,onSearch:h.searchByShop},null,8,["show-result","onSearch"]))]),h.showResult?(Object(c["h"])(),Object(c["d"])("div",b,[h.shopsFiltred.length?Object(c["e"])("",!0):(Object(c["h"])(),Object(c["d"])("div",f,[p,Object(c["f"])("button",{type:"button",class:"button-primary w-button outline sand",onClick:t[3]||(t[3]=function(){return h.clearSearch&&h.clearSearch.apply(h,arguments)})}," Clear search ")])),Object(c["f"])(g,{shops:h.shopsFiltred},null,8,["shops"])])):Object(c["e"])("",!0)])])}var O=n("1da1"),j=n("5530"),v=(n("96cf"),n("4de4"),n("4e82"),n("d81d"),n("caad"),n("2532"),n("b0c0"),n("3835")),m=(n("a9e3"),n("466d"),n("d4ec")),g=n("bee2"),y=n("ade3");n("99af"),n("4ec9"),n("d3b7"),n("3ca3"),n("ddb0");function w(e,t){var n="".concat(e[0],",").concat(e[1]),c="".concat(t[0],",").concat(t[1]);return"".concat(n,";").concat(c)}var x=function(){function e(){Object(m["a"])(this,e),Object(y["a"])(this,"distances",new Map)}return Object(g["a"])(e,[{key:"get",value:function(e,t){var n=w(e,t);return this.distances.get(n)}},{key:"set",value:function(e,t,n){var c=w(e,t);return this.distances.set(c,n)}}]),e}(),S=new x;function k(e,t){var n=S.get(e,t);if(n)return n;var c=T(e),r=Object(v["a"])(c,2),a=r[0],o=r[1],i=T(t),s=Object(v["a"])(i,2),u=s[0],l=s[1],d=6371,b=Math.sqrt(C(u-a)+Math.cos(a)*Math.cos(u)*C(l-o)),f=2*d*Math.asin(b);return S.set(e,t,f),f}function L(e){var t=Math.sin(e/2);return 2*t*t}function C(e){return L(e)/2}function M(e){return e*Math.PI/180}function T(e){var t=Object(v["a"])(e,2),n=t[0],c=t[1],r=Number(n),a=Number(c);return isNaN(r)&&(r=R(n)),isNaN(a)&&(a=R(c)),[M(r),M(a)]}function R(e){var t=e.match(/(\d+)\D+(\d+)\D+(\d+)/);return t.length>3?Number(t[1])+t[2]/60+t[3]/3600:e}var U=n("2909"),B=(n("1276"),n("49e1")),I=n.n(B),P=new I.a({apiKey:"keyRGanFfJ3puGrOr"}).base("appcnhQGvkyIFOvOT"),N="Centres",G={getShopList:function(){var e=Object(c["i"])([]);return P(N).select().eachPage((function(t,n){var c,r=Object(U["a"])(t).map((function(e){var t,n=e.fields,c=(null===(t=n["Longtitude and latitude corrdinates "])||void 0===t?void 0:t.split(","))||[];return{id:n.id,name:n["Shopping centre name "],address:n.Address||"",buyGiftCardUrl:n["Buy gift card URL"],websiteUrl:n["Website URL"],corrdinates:c}}));(c=e.value).push.apply(c,Object(U["a"])(r)),n()}),(function(e){e&&console.error(e)})),e}},_=n("d0a8"),F=n.n(_),q=n("2c50"),A=n.n(q),K=F()({accessToken:"pk.eyJ1Ijoiam9zaC1yY2NvIiwiYSI6ImNrcmRoZWx5cDB1eDYycXBlYmR5MmhxeHcifQ.GtgjC2p2B0B9alxZ8Z1hYQ"}),V=A()(K),Y=new Map;function z(e){return D.apply(this,arguments)}function D(){return D=Object(O["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,V.forwardGeocode({query:t}).send();case 2:return n=e.sent,e.abrupt("return",n.body.features.map((function(e){var t=Object(v["a"])(e.center,2),n=t[0],c=t[1],r=e.bbox;return{id:e.id,name:e.place_name,corrdinates:[c,n],bbox:r?[r[1],r[0],r[3],r[2]]:void 0}})));case 4:case"end":return e.stop()}}),e)}))),D.apply(this,arguments)}var J={getLocations:function(){var e=Object(O["a"])(regeneratorRuntime.mark((function e(t){var n,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=Y.get(t),!n){e.next=3;break}return e.abrupt("return",n);case 3:return e.next=5,z(t);case 5:return c=e.sent,Y.set(t,c),e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},Q={class:"search-input-wrapper search-by-location"},Z=Object(c["f"])("img",{src:"https://assets.website-files.com/60dddc34cacb5c42e92bde2f/60ecb5f6a19c1b68ef2ac7ad_Location.svg",loading:"lazy",alt:""},null,-1),H={class:"form-input-wrapper"},W=Object(c["f"])("label",{for:"radius",class:"radius"},"Radius",-1);function X(e,t,n,r,a,o){var i=Object(c["k"])("SearchInput"),s=Object(c["k"])("LocationOptions"),u=Object(c["l"])("mask");return Object(c["h"])(),Object(c["d"])(c["a"],null,[Object(c["f"])("div",Q,[Object(c["f"])(i,{searchText:r.searchText,"onUpdate:searchText":t[1]||(t[1]=function(e){return r.searchText=e}),ref:"searchInputRef",onInput:r.searchLocation,onSearch:t[2]||(t[2]=function(e){return r.search()})},null,8,["searchText","onInput"]),Object(c["f"])("button",{disabled:r.loading,class:"geolocation",tabindex:"4",onClick:t[3]||(t[3]=function(){return r.getCurrentPosition&&r.getCurrentPosition.apply(r,arguments)})},[Object(c["f"])("div",{class:["geolocation-icon",r.geolocationIconClass]},[Z],2)],8,["disabled"]),n.locations.length?(Object(c["h"])(),Object(c["d"])(s,{key:0,locations:n.locations,onSelectLocation:r.selectLocation},null,8,["locations","onSelectLocation"])):Object(c["e"])("",!0)]),Object(c["f"])("div",H,[W,Object(c["r"])(Object(c["f"])("input",{"onUpdate:modelValue":t[4]||(t[4]=function(e){return r.radius=e}),type:"text",tabindex:"5",id:"radius",class:"form-input w-input"},null,512),[[c["p"],r.radius,void 0,{number:!0}],[u,r.radiusMask]])])],64)}var $=n("2ef0");function E(e,t,n,r,a,o){return Object(c["h"])(),Object(c["d"])("ul",{class:"location-options",onKeyup:[t[1]||(t[1]=Object(c["s"])((function(){return r.focusPreviousOption&&r.focusPreviousOption.apply(r,arguments)}),["arrow-up"])),t[2]||(t[2]=Object(c["s"])((function(){return r.focusNextOption&&r.focusNextOption.apply(r,arguments)}),["arrow-down"]))]},[(Object(c["h"])(!0),Object(c["d"])(c["a"],null,Object(c["j"])(n.locations,(function(e){return Object(c["h"])(),Object(c["d"])("li",{key:e.id,tabindex:"2",onClick:function(t){return r.selectLocation(e)},onKeyup:[Object(c["s"])((function(t){return r.selectLocation(e)}),["enter"]),Object(c["s"])((function(t){return r.selectLocation(e)}),["space"])]},Object(c["m"])(e.name),41,["onClick","onKeyup"])})),128))],32)}var ee={name:"LocationOptions",props:{locations:{type:Array,default:function(){return[]}}},emits:["select-location"],setup:function(e,t){var n=t.emit;function c(e){e.target.previousSibling.tabIndex&&e.target.previousSibling.focus()}function r(e){e.target.nextSibling.tabIndex&&e.target.nextSibling.focus()}function a(e){n("select-location",e)}return{focusPreviousOption:c,focusNextOption:r,selectLocation:a}}};n("0521");ee.render=E;var te=ee,ne=n("51f2"),ce=n.n(ne),re={class:"form-input-wrapper form-input-group search-input"},ae=Object(c["f"])("div",{class:"form-input-group-prepend"},[Object(c["f"])("img",{src:ce.a,loading:"lazy",alt:""})],-1),oe={class:"form-input-group-append"};function ie(e,t,n,r,a,o){return Object(c["h"])(),Object(c["d"])("div",re,[ae,Object(c["r"])(Object(c["f"])("input",Object(c["g"])({"onUpdate:modelValue":t[1]||(t[1]=function(e){return r.searchTextComputed=e})},e.$attrs,{tabindex:"1",type:"text",class:"form-input w-input"}),null,16),[[c["p"],r.searchTextComputed]]),Object(c["f"])("div",oe,[Object(c["f"])("button",{type:"button",tabindex:"3",class:"button-primary w-button",ref:"searchButtonRef",onClick:t[2]||(t[2]=function(e){return r.search()})},"Search",512)])])}var se={name:"SearchInput",props:{searchText:{type:String,required:!0}},emits:["search","update:searchText"],setup:function(e,t){var n=t.emit,r=Object(c["i"])(),a=Object(c["n"])(e),o=a.searchText,i=Object(c["b"])({get:function(){return o.value},set:function(e){n("update:searchText",e)}});function s(){n("search")}function u(){r.value.focus()}return{searchTextComputed:i,search:s,focusSearchButton:u,searchButtonRef:r}}};n("7b52");se.render=ie;var ue=se;n("b680");function le(e,t,n){var r=Object(c["i"])(!1),a={enableHighAccuracy:!0,timeout:1e4,maximumAge:3e4};function o(c){r.value=!1;var a=[c.coords.latitude,c.coords.longitude],o=c.coords.latitude.toFixed(4),i=c.coords.longitude.toFixed(4);e.value="".concat(o,", ").concat(i),n("select-location",{corrdinates:a}),t.value=10,n("search",t.value)}function i(){r.value=!0,navigator.geolocation.getCurrentPosition(o,(function(){}),a)}return{getCurrentPosition:i,loading:r}}var de=n("2526"),be=n.n(de),fe={beforeMount:function(e,t){be()(t.value).mask(e)}};function pe(e){var t=Object(v["a"])(e,4),n=t[0],c=t[1],r=t[2],a=t[3],o=k([n,c],[r,a]);return Math.floor(o/2)}var he={name:"SearchByLocation",components:{LocationOptions:te,SearchInput:ue},directives:{mask:fe},props:{locations:{type:Array,default:function(){return[]}},showResult:{type:Boolean,default:!1}},emits:["search","select-location","search-location"],setup:function(e,t){var n=t.emit,r=Object(c["n"])(e),a=r.showResult,o=Object(c["i"])(""),i=Object(c["i"])(),s=Object(c["i"])(10),u={alias:"numeric",suffix:" km",max:1e6};function l(){n("search",s.value)}function d(e){o.value=e.name,s.value=e.bbox?pe(e.bbox):10,n("select-location",e),i.value.focusSearchButton()}var b=Object($["debounce"])((function(){n("search-location",o.value)}),800),f=le(o,s,n),p=f.getCurrentPosition,h=f.loading,O=Object(c["b"])((function(){return h.value?"geolocation-icon-animation":""}));return Object(c["q"])(a,(function(e){e||(o.value="")})),{searchText:o,search:l,selectLocation:d,searchLocation:b,radius:s,radiusMask:u,getCurrentPosition:p,geolocationIconClass:O,loading:h,searchInputRef:i}}};n("3460");he.render=X;var Oe=he;function je(e,t,n,r,a,o){var i=Object(c["k"])("SearchInput");return Object(c["h"])(),Object(c["d"])(i,{searchText:r.searchText,"onUpdate:searchText":t[1]||(t[1]=function(e){return r.searchText=e}),onKeyup:t[2]||(t[2]=Object(c["s"])((function(e){return r.search()}),["enter"])),onSearch:t[3]||(t[3]=function(e){return r.search()})},null,8,["searchText"])}var ve={name:"SearchByShoppingCentre",components:{SearchInput:ue},props:{showResult:{type:Boolean,default:!1}},emits:["search"],setup:function(e,t){var n=t.emit,r=Object(c["n"])(e),a=r.showResult,o=Object(c["i"])("");function i(){n("search",o.value)}return Object(c["q"])(a,(function(e){e||(o.value="")})),{searchText:o,search:i}}};n("a984");ve.render=je;var me=ve,ge={class:"insights-collection-list-wrapper w-dyn-list"},ye={class:"insights-collection-list w-dyn-items",role:"list"};function we(e,t,n,r,a,o){var i=Object(c["k"])("ShopCard");return Object(c["h"])(),Object(c["d"])("div",ge,[Object(c["f"])("div",ye,[(Object(c["h"])(!0),Object(c["d"])(c["a"],null,Object(c["j"])(n.shops,(function(e){return Object(c["h"])(),Object(c["d"])(i,{key:e.id,shop:e},null,8,["shop"])})),128))])])}var xe=n("db9d"),Se=n.n(xe),ke={class:"insights-collection-item w-dyn-item",role:"listitem"},Le={class:"insights-card-wrapper"},Ce=Object(c["f"])("div",{class:"image-wrapper"},[Object(c["f"])("img",{src:Se.a,loading:"lazy",alt:""})],-1),Me={class:"insights-card-heading"},Te={class:"margin-bottom-20"},Re=Object(c["f"])("div",{class:"div-block-3"},[Object(c["f"])("div",{class:"inline"},[Object(c["f"])("div",{class:"button-text"},"Buy gift card")])],-1),Ue=Object(c["f"])("div",{class:"div-block-3"},[Object(c["f"])("div",{class:"inline"},[Object(c["f"])("div",{class:"button-text"},"Visit website")])],-1);function Be(e,t,n,r,a,o){return Object(c["h"])(),Object(c["d"])("div",ke,[Object(c["f"])("div",Le,[Ce,Object(c["f"])("div",Me,[Object(c["f"])("h3",null,Object(c["m"])(n.shop.name),1),Object(c["f"])("div",Te,Object(c["m"])(n.shop.address),1),r.buyGiftCardUrl?(Object(c["h"])(),Object(c["d"])("a",{key:0,href:r.buyGiftCardUrl,target:"_blank",class:"button-primary w-button width-100 margin-bottom-20"},[Re],8,["href"])):Object(c["e"])("",!0),r.websiteUrl?(Object(c["h"])(),Object(c["d"])("a",{key:1,href:r.websiteUrl,target:"_blank",class:"button-primary sand outline width-100 w-inline-block"},[Ue],8,["href"])):Object(c["e"])("",!0)])])])}var Ie={name:"ShopCard",props:{shop:{type:Object,required:!0}},setup:function(e){var t="N/A",n=e.shop.buyGiftCardUrl&&e.shop.buyGiftCardUrl!==t?e.shop.buyGiftCardUrl:"",c=e.shop.websiteUrl&&e.shop.websiteUrl!==t?e.shop.websiteUrl:"";return{buyGiftCardUrl:n,websiteUrl:c}}};Ie.render=Be;var Pe=Ie,Ne={name:"ShopList",components:{ShopCard:Pe},props:{shops:{type:Array,required:!0}}};Ne.render=we;var Ge=Ne,_e={name:"ShoppingCentres",components:{SearchByLocation:Oe,SearchByShoppingCentre:me,ShopList:Ge},setup:function(){var e=Object(c["i"])(!0),t=Object(c["i"])(!1),n=G.getShopList(),r=Object(c["i"])([]),a=Object(c["i"])({}),o=Object(c["i"])([]);function i(e){o.value=a.value.corrdinates?n.value.map((function(e){return Object(j["a"])(Object(j["a"])({},e),{},{distance:e.corrdinates.length?k(a.value.corrdinates,e.corrdinates):null})})).sort((function(e,t){return e.distance-t.distance})).filter((function(t){return null!==t.distance&&(!e||t.distance<=e)})):[],t.value=!0}function s(e){return u.apply(this,arguments)}function u(){return u=Object(O["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,J.getLocations(t);case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=[];case 7:r.value=e.t0;case 8:case"end":return e.stop()}}),e)}))),u.apply(this,arguments)}function l(e){r.value=[],a.value=e}function d(e){o.value=n.value.filter((function(t){return t.name.toLowerCase().includes(e.toLowerCase())||t.address.toLowerCase().includes(e.toLowerCase())})),t.value=!0}function b(){t.value=!1,o.value=[],r.value=[],a.value={}}return Object(c["q"])(e,(function(){b()})),{shopsFiltred:o,isLocationMode:e,search:i,searchLocation:s,selectLocation:l,searchByShop:d,clearSearch:b,locations:r,showResult:t}}};n("b239");_e.render=h;var Fe=_e;Object(c["c"])(Fe).mount("#shopping-centres-app")},"7b52":function(e,t,n){"use strict";n("1aa4")},a984:function(e,t,n){"use strict";n("255c")},b239:function(e,t,n){"use strict";n("24a7")},db9d:function(e,t,n){e.exports=n.p+"img/image-not-found.c5d0afe3.jpg"},f32f:function(e,t,n){}});
//# sourceMappingURL=app.d7e1d646.js.map